{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <script type="text/javascript" src="//tools-static.wmflabs.org/cdnjs/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $( document ).ready( function(){
            $('.user-pages').on( 'click', function(){
                $(this).next().toggle();
            });
        });
    </script>
    <style>
        .user-pages {
            text-decoration: underline;
            color: #007bff;
            cursor: pointer;
        }
    </style>
{% endblock %}

{% block main %}
    <h1>Contest Info</h1>
    <hr>
    <ul>
        <li>
            Name: {{ data["name"] }}
        </li>
        <li>
            Project: {{ data["project"] }}
        </li>
        <li>
            Started from: {{ data["start_date"] }}
        </li>
        <li>
            End on: {{ data["end_date"] }}
        </li>
        <li>
            Created by: {{ data["createdby"] }}
        </li>
        <li>
            Created on: {{ data["createdon"] }} UTC
        </li>

    </ul>
    <h2>Administrators</h2>
    <hr>
    <ul>
        {% for u in data["admin"] %}
            <li>
                <a href="https://{{data["project"]}}.wikisource.org/wiki/User:{{ u }}">
                    {{ u }}
                </a>
            </li>
        {% endfor %}
    </ul>

    <h2>Index Page</h2>
    <hr>
    <ul>
        {% for u in data["index"] %}
            <li>
                <a href="https://{{data["project"]}}.wikisource.org/wiki/{{ u }}">
                    {{ u }}
                </a>
            </li>
        {% endfor %}
    </ul>

    <h2>Scores</h2>
    <h5>Proofread</h5>
    <hr>
    <table class="table table-hover table-bordered">
        <tr>
            <th>User</th>
            <th>Pages</th>
            <th>No of Pages</th>
        </tr>
        {% for users in proofread %}
        <tr>
            <td>
                <a href="https://{{data["project"]}}.wikisource.org/wiki/User:{{users}}">
                    {{users}}
                </a>
            </td>
            <td>
                <p class="user-pages"> Show/Hide Pages </p>
                <div style="display:none;">
                    {% for page in proofread[users] %}
                        <a href="https://{{ data["project"] }}.wikisource.org/wiki/{{page}}">
                            {{page}}
                        </a>
                        <br>
                    {% endfor %}
                </div>
            </td>
            <td>{{ proofread[users]|length }}</td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <h5>Validate</h5>
    <hr>
    <table class="table table-hover table-bordered">
        <tr>
            <th>User</th>
            <th>Pages</th>
            <th>No of Pages</th>
        </tr>
        {% for users in validate %}
        <tr>
            <td>
                <a href="https://{{data["project"]}}.wikisource.org/wiki/User:{{users}}">
                    {{users}}
                </a>
            </td>
            <td>
                <p class="user-pages"> Show/Hide Pages </p>
                <div style="display:none;">
                    {% for page in validate[users] %}
                        <a href="https://{{ data["project"] }}.wikisource.org/wiki/{{page}}">
                            {{page}}
                        </a>
                        <br>
                    {% endfor %}
                </div>
            </td>
            <td>{{ validate[users]|length }}</td>
        </tr>
        {% endfor %}
    </table>

{% endblock %}